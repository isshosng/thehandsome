<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hyundai.thehandsome.mapper.ProductListDAO">
	<select id="getProductList"
		resultType="com.hyundai.thehandsome.Vo.product.ListVO">
		select brand.BNAME, pcommon.PNAME,
		pcolor.PCID,
		pcolor.PCIMG1, pcolor.PCIMG3,
		pcolor.PCCHIPIMG,
		pcolor.PCCOLORCODE,pcolor.PCPRICE,
		pcommon.PID
		from product_common
		pcommon
		inner join product_color pcolor
		on pcommon.pid = pcolor.pid
		inner join brand brand
		on brand.BNO = pcommon.BNO
	</select>

	<select id="getPListWithCategory"
		resultType="com.hyundai.thehandsome.Vo.product.CatePListVO">
		SELECT DISTINCT
		brand.bname,
		pcommon.pname,
		pcolor.pcprice,
		pcommon.pid
		FROM
		product_common pcommon
		INNER
		JOIN product_color pcolor ON
		pcommon.pid = pcolor.pid
		INNER JOIN brand
		brand ON brand.bno =
		pcommon.bno
		INNER JOIN pid_with_category_view v ON
		v.pid = pcommon.pid
		<if
			test="!@com.hyundai.thehandsome.test.MybatisCheckNull@isEmpty(depth1name)">
			where v.depth1name = #{depth1name}
		</if>
		<if
			test="!@com.hyundai.thehandsome.test.MybatisCheckNull@isEmpty(depth2name)">
			and v.depth2name = #{depth2name}
		</if>
		<if
			test="!@com.hyundai.thehandsome.test.MybatisCheckNull@isEmpty(depth3name)">
			and v.depth3name = #{depth3name}
		</if>
	</select>
	<select id="getProductColor"
		resultType="com.hyundai.thehandsome.Vo.product.ColorVO">
		SELECT PID, PCID, PCIMG1, PCCHIPIMG, PCCOLORCODE
		FROM
		PRODUCT_COLOR
		WHERE PID = #{PID}
	</select>
	<select id="getProductDetail"
		resultType="com.hyundai.thehandsome.Vo.product.detail.ProductDetailVO">
		SELECT * FROM PRODUCT_DETAIL_VIEW
		WHERE PCID = #{PCID}

	</select>



	<select id="findWishlist" resultType="String">
		SELECT PID FROM LIKES
		WHERE
		PID=#{productCode} and MID=#{mId}
	</select>

	<insert id="insertWishlist">
		INSERT INTO LIKES
		VALUES( #{productCode} , #{mId})
	</insert>

	<delete id="deleteWishlist">
		delete from LIKES
		where WHERE PID=#{productCode} and
		MID=#{mId}
	</delete>

</mapper>