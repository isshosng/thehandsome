<!--
 @Date : 2023. 02. 06.
 @작성자 : 박성환
 @설명 :  비밀번호 재확인 페이지 ( 2중 보안)
-->

<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<title>개인정보 변경 비밀번호 체크 | 더한섬닷컴</title>

<th:block th:replace="common/head :: headFragment"></th:block>

<body>



	<script>
		(function() {
			if (document.cookie.indexOf("thehyundai=true") > -1) {
				var d = new Date();
				d.setTime(d.getTime() + 365 * 24 * 60 * 60 * 1000);
				document.cookie = "sslvisit=true; expires=" + d.toUTCString()
						+ "; path=/";
			} else if (document.cookie.indexOf("rakuten=") > -1) {
				var d = new Date();
				d.setTime(d.getTime() + 365 * 24 * 60 * 60 * 1000);
				document.cookie = "sslvisit1=true; expires=" + d.toUTCString()
						+ "; path=/";
			} else if (document.cookie.indexOf("hyundaihmall=true") > -1) {
				var d = new Date();
				d.setTime(d.getTime() + 365 * 24 * 60 * 60 * 1000);
				document.cookie = "sslvisit2=true; expires=" + d.toUTCString()
						+ "; path=/";
			} else if (document.cookie.indexOf("fromSite") > -1) {
				var d = new Date();
				d.setTime(d.getTime() + 365 * 24 * 60 * 60 * 1000);
				document.cookie = "sslvisit3=" + "" + "; expires="
						+ d.toUTCString() + "; path=/";
			} else if (document.cookie.indexOf("recommender") > -1) {
				var d = new Date();
				d.setTime(d.getTime() + 365 * 24 * 60 * 60 * 1000);
				document.cookie = "sslvisit4=" + "" + "; path=/";
			}
		})();
	</script>
	<!-- Loading -->
	<div style="display: none">
		<div id="loadingBarDiv" style="display: none"></div>
	</div>
	<!-- //Loading -->

	<form id="CSRFForm" action="/ko/mypage/personInfomationChangePWCheck" method="post">
		<div>
			<input type="hidden" name="CSRFToken" value="cae62a12-6662-47ac-bd1c-da3fb8f5c132" />
		</div>
	</form>
	<div id="mapleMainPopwrap"
		style="position: fixed; top: 50%; left: 50%; width: 81.333333%; z-index: 805; transform: translate(-50%, -50%); display: none;"
	></div>

	<div class="layerArea" id="mapleLayer" style="display: none">
		<div class="layerBg"></div>
	</div>

	<!-- ################## hsome_allContents_wrapper | ë³¸ë¬¸ ì»¨íì¸  ìì­ ################## -->
	<div class="hsome_allContents_wrapper">
		<div class="hsome_allContents">
			<script type="text/javascript">
				function goMainpage() {
					window.sessionStorage.removeItem("moveYn");
					location.href = "/ko/main";
				}
			</script>

			<!-- ################## header ################## -->
			<header class="hsome_header">
				<h1 class="h_ttl ellipsis" id="headerTitle">비밀번호 재확인</h1>
				<a href="javascript:noLink();" onclick="goBack();" class="h_prev">이전 페이지로 가기</a>
				<ul class="h_gnbMenu">
					<li class="search"><a href="/ko/mobilecommon/search" onclick="GA_Event('공통', '헤더', '검색');"><span>search</span></a></li>
					<li class="cart"><a href="/ko/shoppingbag" onclick="GA_Event('공통', '헤더', '쇼핑백');"><span>cart</span><i>0</i></a></li>
				</ul>
			</header>
			<!-- //################## header ################## -->

			<!-- 아이디값이 마스킹 되기전에 보이기때문에 마스킹 처리를 해준후 보여지기위해
			th:inline="javascript" 를 사용하여 자바스크립트에 처리후 뿌려준다. -->
			<script type="text/javascript" th:inline="javascript">
				//<![CDATA[
				$(document)
						.ready(
								function() {
									
									var userid = [[${#authentication.name}]];
									console.log(userid);
									
									//아이디 마스킹
									$(".user_id").html(
											maskingId(userid));

									capsLockCheck("j_password");

									//inputDataValidationCheck('j_password');

									$("#login_btn")
											.click(
													function() {
														
													
														
														if ($.trim($(
																"#j_username")
																.val()) == "") {
															location.href = "/member/login";
														}

														if ($.trim($(
																"#j_password")
																.val()) == "") {
															$("#msgErr").show();
															$("#msgErr")
																	.text(
																			"비밀번호를 입력하세요.");
															//$('#msgErr').text("Please enter your password");
															$("#j_password")
																	.focus();
															return;
														}

														var pw = $(
																"#j_password")
																.val();
														
														$("#mpassword").val(pw);
														
														$("#personInfomationChangePage").submit();
																																								
														
																
													});

									$("#cancle_btn").click(function() {
										location.href = "/ko/";
									});

									$("#j_password").keypress(function(event) {
										if (event.which == 13) {
											event.preventDefault();
											$("#login_btn").click();
											$(this).blur();
										}
									});

									$("#findPWBtn")
											.click(
													function() {
														location.href = "/ko/member/findIdPwPage";
													});
								});

				//]]>
			</script>
			<form id="bioLoginForm" method="post" action="/ko/member/bioCheck">
				<input type="hidden" id="bio_userId" name="j_username" />
				<input type="hidden" id="bio_CSRFToken" name="CSRFToken" />
				<input type="hidden" id="bio_authToken" name="authToken" />
				<input type="hidden" id="successPageUrl" name="successPageUrl" />
			</form>
			<form id="personInfomationChangePage" name="manToManInquiryForm" action="/mypage/personInfomationChangePWCheck" method="post">
				<input type="hidden" name="directInto" value="NO" />
				<div>
					<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
					<input type="hidden" id="mpassword" name="mpassword" title="비밀번호를 입력하세요." placeholder="비밀번호를 입력하세요." />
				</div>
			</form>
			<!-- contents s -->
			<div id="contents" class="hsome_contents mp_confirm_pw_wrap">
				<div class="gray_tab">고객님의 정보보호를 위하여 비밀번호를 다시 한 번 확인합니다.</div>
				<div class="mp_input_wrap">
					<div class="user_id_wrap">
						<span class="user_id"></span>
						<input type="hidden" id="j_username" name="j_username" value="95n*****************" disabled="disabled" />
					</div>
					<!-- input_box s -->
					<div class="input_box">
						<div class="ipt_con">
							<input type="password" id="j_password" name="mpassword" title="비밀번호를 입력하세요." placeholder="비밀번호를 입력하세요." />
							<p class="err_box" id="msgErr"></p>
						</div>
					</div>
					<!-- input_box e -->

					<div class="btn_wrap btn_wrap_div1 mt25 pb0" id="findPW" style="display: none">
						<a href="#none" class="btnstl3 border_btn_gray" id="findPWBtn"><span>비밀번호 찾기</span></a>
					</div>

					<div class="btn_wrap btn_wrap_div2 last_box">
						<a href="#none" class="btnstl3 border_btn_gray" id="cancle_btn"><span>취소</span></a> <a href="#none" class="btnstl3 solid_btn_blk btn_save"
							id="login_btn"
						><span>확인</span></a>
					</div>
				</div>
			</div>
			<!-- contents e -->
		</div>
	</div>

	<script th:inline="javascript">
	
	// 23/02/06 _ 비밀번호 틀렸을때 alert
	
 
	var msg = [[${msg}]];
    console.log(msg);
    if(msg === '비밀번호를 다시 확인해 주세요.') {
        alert("비밀번호를 다시 확인해 주세요.");
    }
	</script>
	<th:block th:replace="common/footer :: footFragment"></th:block>
</body>
<!-- This script is for AceCounter START -->
</html>
